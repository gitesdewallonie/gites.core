<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      i18n:domain="gites">

<body>

<tal:main metal:define-macro="promotions_table">
    <span tal:define="thclass string:sort">
              <table class="listing" width="95%"
                     tal:condition="promotions">
                <thead>
                  <th class="nosort">&nbsp;</th>
                  <th i18n:translate="nom_hebergement" class="" tal:attributes="class thclass">Nom </th>
                  <th i18n:translate="type_hebergement" class="" tal:attributes="class thclass">Type</th>
                  <th i18n:translate="localite_hebergement" class="" tal:attributes="class thclass">Localit&eacute;</th>
                  <th i18n:translate="epis_hebergement" class="" tal:attributes="class thclass">Classification</th>
                  <th class="" tal:attributes="class thclass">
                    <span id="capacite">
                      <img src="capacite.png"
                           title="Capacite"
                           alt="Capacite"
                           i18n:attributes="alt capacite; title capacite" />
                  </th>
                  <th class="" tal:attributes="class thclass">
                      <img src="lit_double.png"
                           title="Nombre de chambres"
                           alt="Nombre de chambres"
                           i18n:attributes="alt nombre-chambres; title nombre-chambres" />
                  </th>
                  <th i18n:translate="date_debut" class="" tal:attributes="class thclass">Date de d&eacute;but</th>
                  <th i18n:translate="date_fin" class="" tal:attributes="class thclass">Date de fin</th>
                  <th i18n:translate="texte_promotion" class="" tal:attributes="class thclass">Promotion</th>
                </thead>
                <tbody>
                  <tal:loop tal:repeat="promotion promotions">
                  <tr tal:define="oddrow repeat/promotion/odd;
                                  promotion_view nocall:promotion/@@dernieres_minutes_view;
                                  hebergement promotion/getHebergement"
                      tal:condition="hebergement"
                      tal:attributes="class python:test(oddrow, 'draggable even', 'draggable odd');">
                    <td><a href="" tal:attributes="href hebergement/@@url"> <img src="" alt="" border="0" tal:attributes="src string:${context/@@plone_portal_state/portal_url}/vignettes_heb/${hebergement/getVignette}" /></a></td>
                    <td><a href="" tal:attributes="href hebergement/@@url" tal:content="hebergement/heb_nom"></a></td>
                    <td tal:define="hebergementView nocall:hebergement/@@hebergement_view;"
                        tal:content="hebergementView/getTypeHebergement"/>
                    <td tal:content="hebergement/heb_localite"/>
                      <td tal:define="hebergementIcons hebergement/@@hebergement_icons"
                          tal:content="structure hebergementIcons/getEpis">
                            <span i18n:translate="epis">Les &eacute;pis</span>
                      </td>
                      <td>
                          <span tal:condition="python: hebergement.heb_cgt_cap_min != hebergement.heb_cgt_cap_max"
                                tal:content="string: ${hebergement/heb_cgt_cap_min}/${hebergement/heb_cgt_cap_max}" />
                          <span tal:condition="python: hebergement.heb_cgt_cap_min == hebergement.heb_cgt_cap_max"
                                tal:content="string: ${hebergement/heb_cgt_cap_min}" />
                      </td>
                      <td class="centered-column" tal:content="hebergement/heb_cgt_nbre_chmbre"/>
                      <td tal:content="promotion_view/getNiceEventStartDate" />
                      <td tal:content="promotion_view/getNiceEventEndDate" />
                      <td tal:content="structure promotion_view/getText" />
                    </tr>

                  </tal:loop>
                </tbody>
              </table>
    </span>

              <div i18n:translate="not_promotion_correspondant"
                   class="error"
                   tal:condition="not:promotions">Il n'y a aucune promotion</div>
</tal:main>



<tal:main metal:define-macro="lastminutes_table">
    <span tal:define="thclass string:sort">
              <table class="listing" width="95%"
                     tal:condition="lastminutes">
                <thead>
                  <th class="nosort">&nbsp;</th>
                  <th i18n:translate="nom_hebergement" class="" tal:attributes="class thclass">Nom </th>
                  <th i18n:translate="type_hebergement" class="" tal:attributes="class thclass">Type</th>
                  <th i18n:translate="localite_hebergement" class="" tal:attributes="class thclass">Localit&eacute;</th>
                  <th i18n:translate="epis_hebergement" class="" tal:attributes="class thclass">Classification</th>
                  <th class="" tal:attributes="class thclass">
                    <span id="capacite">
                      <img src="capacite.png"
                           title="Capacite"
                           alt="Capacite"
                           i18n:attributes="alt capacite; title capacite" />
                  </th>
                  <th class="" tal:attributes="class thclass">
                      <img src="lit_double.png"
                           title="Nombre de chambres"
                           alt="Nombre de chambres"
                           i18n:attributes="alt nombre-chambres; title nombre-chambres" />
                  </th>
                  <th i18n:translate="date_debut" class="" tal:attributes="class thclass">Date de d&eacute;but</th>
                  <th i18n:translate="date_fin" class="" tal:attributes="class thclass">Date de fin</th>
                </thead>
                <tbody>
                  <tal:loop tal:repeat="lastminute lastminutes">
                  <tr tal:define="oddrow repeat/lastminute/odd;
                                  lastminute_view nocall:lastminute/@@dernieres_minutes_view;
                                  hebergement lastminute/getHebergement"
                      tal:condition="hebergement"
                      tal:attributes="class python:test(oddrow, 'draggable even', 'draggable odd');">
                    <td><a href="" tal:attributes="href hebergement/@@url"> <img src="" border="0" alt="" tal:attributes="src string:${context/@@plone_portal_state/portal_url}/vignettes_heb/${hebergement/getVignette}" /></a></td>
                    <td><a href="" tal:attributes="href hebergement/@@url" tal:content="hebergement/heb_nom"></a></td>
                    <td tal:define="hebergementView nocall:hebergement/@@hebergement_view"
                        tal:content="hebergementView/getTypeHebergement"/>
                    <td tal:content="hebergement/heb_localite"/>
                      <td tal:define="hebergementIcons hebergement/@@hebergement_icons;"
                          tal:content="structure hebergementIcons/getEpis">
                            <span i18n:translate="epis">Les &eacute;pis</span>
                      </td>

                      <td>
                          <span tal:condition="python: hebergement.heb_cgt_cap_min != hebergement.heb_cgt_cap_max"
                                tal:content="string: ${hebergement/heb_cgt_cap_min}/${hebergement/heb_cgt_cap_max}" />
                          <span tal:condition="python: hebergement.heb_cgt_cap_min == hebergement.heb_cgt_cap_max"
                                tal:content="string: ${hebergement/heb_cgt_cap_min}" />
                      </td>
                      <td class="centered-column" tal:content="hebergement/heb_cgt_nbre_chmbre"/>
                      <td tal:content="lastminute_view/getNiceEventStartDate" />
                      <td tal:content="lastminute_view/getNiceEventEndDate" />
                    </tr>

                  </tal:loop>
                </tbody>
              </table>
    </span>

              <div i18n:translate="not_lastminute_correspondant"
                   class="error"
                   tal:condition="not:lastminutes">Il n'y a aucune derni&egrave;re minute</div>

</tal:main>

</body>
</html>
