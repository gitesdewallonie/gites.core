<div id="listing-result-block">
    <div id="listing-result-info"
         i18n:domain="gites">
        <div id="listing-result-batch"
             tal:condition="viewlet/show_batch">
            <a href=""
               tal:condition="not:viewlet/is_first_page"
               ng-click="goToPreviousPage()"
               i18n:translate="precedent">Précédent</a>
            <tal:pages tal:repeat="page_number viewlet/pages">
                <a href=""
                   tal:content="page_number"
                   tal:attributes="ng-click string:goToPage(${page_number})" ng-click="goToPage(2)"/>
            </tal:pages>
            <a href=""
               tal:condition="not:viewlet/is_last_page"
               ng-click="goToNextPage()"
               i18n:translate="suivant">Suivant</a>
        </div>


        <div id="sort">
            <label for="input-sort" i18n:translate="trier_par">Trier les résultats par </label>
            <select id="input-sort"
                    name="input-sort"
                    ng-model="sort"
                    ng-change="updateSort()">
                <tal:sort tal:repeat="sort_item python:viewlet.sort_items().items()">
                    <option value=""
                            tal:attributes="value python:sort_item[0]"
                            tal:content="python:sort_item[1]"/>
                </tal:sort>
            </select>
        </div>

        <div class="break-float"></div>

        <div id="listing-result-count"
             i18n:translate="heb_count">
            Hébergement
            <span i18n:name="heb_start" tal:replace="viewlet/batch_start"/>
            à
            <span i18n:name="heb_number" tal:replace="viewlet/batch_end"/>
            sur un total de
            <span i18n:name="heb_number_total" tal:replace="viewlet/count"/>
        </div>
    </div><!--listing-result-info-->

    <div tal:repeat="hebergement viewlet/hebergements"
         i18n:domain="gites">
        <div tal:define="typeHeb hebergement/heb_type_type"
             tal:attributes="class python: typeHeb=='gite' and 'hebergement-gite-listing-detail' or 'hebergement-chambre-listing-detail'">
            <div id="typetype">
                <span tal:content="hebergement/heb_type_type"
                      class="texte-vertical" />
                <div class="btn-loupe-listing">
                    <a href=""
                       tal:attributes="href hebergement/@@url_heb"></a>
                </div>
            </div>
            <div id="vignette">
                <a href=""
                   tal:attributes="href hebergement/@@url_heb">
                    <img src=""
                         width="181"
                         height="115"
                         tal:attributes="src string:${context/@@plone_portal_state/portal_url}/photos_heb/${hebergement/heb_code_gdw}.jpg" />
                </a>
            </div>

            <div id="info-bloc-sup">

                <div class="digit"
                     tal:attributes="id string:map_picto_${hebergement/heb_pk}">
                    <img src=""
                         tal:attributes="src string:${context/@@plone_portal_state/portal_url}/++resource++gites.map.images/${hebergement/heb_type_type}_${repeat/hebergement/number}.png" />
                </div>

                <div tal:condition="viewlet/isGeoLocalized"
                     id="distance">
                     <span tal:define="dist python:viewlet.heb_distance(hebergement)"
                           tal:content="string: ${dist} km"> 5Km </span>
                </div>

                <div id="nom-hebergement">
                    <a href=""
                       tal:attributes="href hebergement/@@url_heb"
                       tal:content="hebergement/heb_nom">Titre de l'hébergement</a>
                </div>
                <div id="type"
                     tal:content="hebergement/heb_type"></div>
            </div><!--info-bloc-sup-->
            <div id="info-bloc-inf">
                <div id="capacite-max">
                    <span tal:condition="python: hebergement.heb_cgt_cap_min != hebergement.heb_cgt_cap_max"
                          tal:content="string: ${hebergement/heb_cgt_cap_min}/${hebergement/heb_cgt_cap_max}"
                          class="nombre" />
                    <span tal:condition="python: hebergement.heb_cgt_cap_min == hebergement.heb_cgt_cap_max"
                          tal:content="string: ${hebergement/heb_cgt_cap_min}"
                          class="nombre" />
                    <span tal:omit-tag="" i18n:translate="x_personnes">personnes</span>
                </div>

                <div id="nbre-chambre">
                    <span tal:content="hebergement/heb_cgt_nbre_chmbre"
                          class="nombre" />
                    <span tal:omit-tag="" i18n:translate="x_chambres">chambres</span>
                </div>

                <div id="nbre-epis">
                    <div id="epis-nbre"
                         i18n:translate="epis">
                      <span tal:content="hebergement/heb_nombre_epis"
                            class="nombre" />
                      <span tal:omit-tag="" i18n:translate="x_epis">epis</span>
                    </div>
                </div>

                <div id="icon-confort">
                    <div id="icon-confort-dog"
                         tal:define="dog hebergement/@@accept_dogs"
                         tal:attributes="class python: dog and 'dog' or 'no-dog'">
                    </div>
                    <div id="icon-confort-smoker"
                         tal:condition="not:smoker"
                         tal:define="smoker hebergement/@@is_smoker"
                         tal:attributes="class python: smoker and 'smoke' or 'no-smoke'">
                    </div>
                </div>

                <div id="commune"
                     tal:content="hebergement/heb_localite"></div>
            </div><!--info-bloc-inf-->
        </div><!--attributes-->
    </div><!--repeat-->
    <div id="break-float"></div>
<div><!--listing-result-block-->
